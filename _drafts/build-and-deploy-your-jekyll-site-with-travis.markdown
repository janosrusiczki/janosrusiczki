## Build

Very well documented here: https://jekyllrb.com/docs/continuous-integration/travis-ci/

Having a blog with ancient (14+ years old) posts I tweaked the html-proofer config to check only the posts of the current year and the one before. As I have my assets on a separate subdomaine I added it so that html-proofer considers it local. feed is redirected from the vhost config so I set that to be ignored. The /assets links are also ignored because they are generated by the gem I'm maintaining but with relative URLs for the moment.

https://github.com/janosrusiczki/janosrusiczki/commit/24acd18d0f5fc2f840d9982021e0d8dcbfc55d31
https://github.com/janosrusiczki/janosrusiczki/commit/768bbad083fe76d5878dce91dff0514a3b385f9b

## Deploy

Based on this article https://oncletom.io/2016/travis-ssh-deploy/

    travis encrypt-file deploy_rsa --add
    encrypting deploy_rsa for janosrusiczki/janosrusiczki
    storing result as deploy_rsa.enc
    storing secure env variables for decryption
    not logged in - try running travis login --org

If on the same server / user use the following to add the authorized key
13:31 $ cat deploy_rsa.pub >> ~/.ssh/authorized_keys

    travis encrypt DEPLOY_DIRECTORY=<deploy directory> --add
    travis encrypt DEPLOY_HOST=<deploy host> --add
    travis encrypt DEPLOY_USER=<deploy user> --add

before_deploy:
  - echo -e "Host heroku.com\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
  - echo -e "Host github.com\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
